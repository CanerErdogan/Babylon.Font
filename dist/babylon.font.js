var BF=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";const n=-8,o=-4,a=0,i=1,s=1,c=2,l=5,u=1024,f=2048,y=8192,b=0,h=4,m=8,d=12,p=12,g=16,w="undefined"!=typeof BigUint64Array,A=Symbol(),_=1024;function U(t,e){const r=new Uint32Array(t),n=new Uint16Array(t);var a=r[e+o>>>2]>>>1,i=e>>>1;if(a<=_)return String.fromCharCode.apply(String,n.subarray(i,i+a));const s=[];do{const t=n[i+_-1],e=t>=55296&&t<56320?_-1:_;s.push(String.fromCharCode.apply(String,n.subarray(i,i+=e))),a-=e}while(a>_);return s.join("")+String.fromCharCode.apply(String,n.subarray(i,i+a))}function v(t){const e={};function r(t,e){return t?U(t.buffer,e):"<yet unknown>"}const n=t.env=t.env||{};return n.abort=n.abort||function(t,o,a,i){const s=e.memory||n.memory;throw Error("abort: "+r(s,t)+" at "+r(s,o)+":"+a+":"+i)},n.trace=n.trace||function(t,o){const a=e.memory||n.memory;console.log("trace: "+r(a,t)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function F(t,e){const r=e.exports,A=r.memory,_=r.table,v=r.__alloc,F=r.__retain,O=r.__rtti_base||-1;function M(t){const e=new Uint32Array(A.buffer);if((t>>>=0)>=e[O>>>2])throw Error("invalid id: "+t);return e[(O+4>>>2)+2*t]}function P(t){const e=new Uint32Array(A.buffer);if((t>>>=0)>=e[O>>>2])throw Error("invalid id: "+t);return e[(O+4>>>2)+2*t+1]}function S(t){return 31-Math.clz32(t>>>l&31)}function x(t,e,r){const n=A.buffer;if(r)switch(t){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(n);case 1:return new(e?Int16Array:Uint16Array)(n);case 2:return new(e?Int32Array:Uint32Array)(n);case 3:return new(e?BigInt64Array:BigUint64Array)(n)}throw Error("unsupported align: "+t)}function B(t){const e=new Uint32Array(A.buffer),r=e[t+n>>>2],a=M(r);if(!(a&s))throw Error("not an array: "+r);const i=S(a);var l=e[t+h>>>2];const y=a&c?e[t+p>>>2]:e[l+o>>>2]>>>i;return x(i,a&u,a&f).subarray(l>>>=i,l+y)}function I(t,e,r){const n=A.buffer,a=new Uint32Array(n),i=a[r+h>>>2];return new t(n,i,a[i+o>>>2]>>>e)}return t.__allocString=function(t){const e=t.length,r=v(e<<1,i),n=new Uint16Array(A.buffer);for(var o=0,a=r>>>1;o<e;++o)n[a+o]=t.charCodeAt(o);return r},t.__getString=function(t){const e=A.buffer;if(new Uint32Array(e)[t+n>>>2]!==i)throw Error("not a string: "+t);return U(e,t)},t.__allocArray=function(t,e){const r=M(t);if(!(r&(s|c)))throw Error("not an array: "+t+" @ "+r);const n=S(r),o=e.length,i=v(o<<n,a),l=v(r&c?g:d,t),w=new Uint32Array(A.buffer);w[l+b>>>2]=F(i),w[l+h>>>2]=i,w[l+m>>>2]=o<<n,r&c&&(w[l+p>>>2]=o);const _=x(n,r&u,r&f);if(r&y)for(let t=0;t<o;++t)_[(i>>>n)+t]=F(e[t]);else _.set(e,i>>>n);return l},t.__getArrayView=B,t.__getArray=function(t){const e=B(t),r=e.length,n=new Array(r);for(let t=0;t<r;t++)n[t]=e[t];return n},t.__getArrayBuffer=function(t){const e=A.buffer,r=new Uint32Array(e)[t+o>>>2];return e.slice(t,t+r)},t.__getInt8Array=I.bind(null,Int8Array,0),t.__getUint8Array=I.bind(null,Uint8Array,0),t.__getUint8ClampedArray=I.bind(null,Uint8ClampedArray,0),t.__getInt16Array=I.bind(null,Int16Array,1),t.__getUint16Array=I.bind(null,Uint16Array,1),t.__getInt32Array=I.bind(null,Int32Array,2),t.__getUint32Array=I.bind(null,Uint32Array,2),w&&(t.__getInt64Array=I.bind(null,BigInt64Array,3),t.__getUint64Array=I.bind(null,BigUint64Array,3)),t.__getFloat32Array=I.bind(null,Float32Array,2),t.__getFloat64Array=I.bind(null,Float64Array,3),t.__instanceof=function(t,e){const r=new Uint32Array(A.buffer);var o=r[t+n>>>2];if(o<=r[O>>>2])do{if(o==e)return!0}while(o=P(o));return!1},t.memory=t.memory||A,t.table=t.table||_,j(r,t)}function O(t,e){var r=(...r)=>(e(r.length),t(...r));return r.original=t,r}function M(t){return"undefined"!=typeof Response&&t instanceof Response}async function P(t,e){return M(t=await t)?S(t,e):F(v(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}async function S(t,e){return WebAssembly.instantiateStreaming?F(v(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):P(M(t=await t)?t.arrayBuffer():t,e)}function j(t,e){var r=e?Object.create(e):{},n=t.__setargc||function(){};function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}for(let e in t){if(!o(t,e))continue;let a=t[e],i=e.split("."),s=r;for(;i.length>1;){let t=i.shift();o(s,t)||(s[t]={}),s=s[t]}let c=i[0],l=c.indexOf("#");if(l>=0){let r=c.substring(0,l),i=s[r];if(void 0===i||!i.prototype){let t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf:function(){return this[A]}},t.wrap=function(e){return Object.create(t.prototype,{[A]:{value:e,writable:!1}})},i&&Object.getOwnPropertyNames(i).forEach(e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))),s[r]=t}if(c=c.substring(l+1),s=s[r].prototype,/^(get|set):/.test(c)){if(!o(s,c=c.substring(4))){let r=t[e.replace("set:","get:")],n=t[e.replace("get:","set:")];Object.defineProperty(s,c,{get:function(){return r(this[A])},set:function(t){n(this[A],t)},enumerable:!0})}}else"constructor"===c?s[c]=O(a,n):Object.defineProperty(s,c,{value:function(...t){return n(t.length),a(this[A],...t)}})}else/^(get|set):/.test(c)?o(s,c=c.substring(4))||Object.defineProperty(s,c,{get:t[e.replace("set:","get:")],set:t[e.replace("get:","set:")],enumerable:!0}):s[c]="function"==typeof a?O(a,n):a}return r}e.instantiate=P,e.instantiateSync=function(t,e){return F(v(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))},e.instantiateStreaming=S,e.demangle=j},function(t,e,r){"use strict";r.r(e);var n=r(0);class o{constructor(t){this.wasm=t}static async Build(t){const e={env:{abort(t,e,r,n){console.error("abort called at"+r+":"+n)}}},r=await n.instantiateStreaming(fetch(t),e);return new o(r)}encode(t,e){const r=new DataView(e);let n=0,o=0,a=0;const i="M".codePointAt(0),s="L".codePointAt(0),c="Q".codePointAt(0),l="C".codePointAt(0);for(const e of t){let t=e.type.codePointAt(0);switch(r.setUint8(n,t),n++,t){case i:case s:r.setFloat64(n,e.x,!0),n+=8,r.setFloat64(n,e.y,!0),n+=8,o=e.x,a=e.y;break;case c:r.setFloat64(n,o,!0),n+=8,r.setFloat64(n,a,!0),n+=8,r.setFloat64(n,e.x1,!0),n+=8,r.setFloat64(n,e.y1,!0),n+=8,r.setFloat64(n,e.x,!0),n+=8,r.setFloat64(n,e.y,!0),n+=8,o=e.x,a=e.y;break;case l:r.setFloat64(n,o,!0),n+=8,r.setFloat64(n,a,!0),n+=8,r.setFloat64(n,e.x1,!0),n+=8,r.setFloat64(n,e.y1,!0),n+=8,r.setFloat64(n,e.x2,!0),n+=8,r.setFloat64(n,e.y2,!0),n+=8,r.setFloat64(n,e.x,!0),n+=8,r.setFloat64(n,e.y,!0),n+=8,o=e.x,a=e.y}}return n}compileEncoded(t,e,r,n,o){if(n=Math.max(0,Math.min(255,Math.round(n))),o=Math.abs(o),t!==this.wasm.memory.buffer){const e=this.wasm.memory.buffer;for(let r=0,n=t.byteLength;r<n;++r)e[r]=t[r]}const a=this.wasm.compile(e,r,n,o),i=new Float64Array(this.wasm.memory.buffer),s=this.wasm.__getUint32Array(a),c=new Array(s.length);for(let t=0;t<s.length;t++){const e={fill:[],holes:[]},r=this.wasm.__getUint32Array(s[t]);for(const t of r){const r=this.wasm.__getUint32Array(t);let n;0===e.fill.length?n=e.fill:e.holes.push(n=[]);for(const t of r)n.push([i[0+(t>>>3)],i[1+(t>>>3)]])}c[t]=e}return c}compile(t,e,r,n){const o=this.wasm.memory.buffer,a=this.encode(t,this.wasm.memory.buffer);return this.compileEncoded(o,a,e,r,n)}}class a{constructor(t,e){this.raw=t,this.compiler=e}static async Install(t,e){const r=await function(t){return new Promise((e,r)=>{opentype.load(t,(t,n)=>{t?r(t):e(n)})})}(t);return new a(r,e)}static Measure(t,e,r){return new i(t,e,r)}static Compile(t,e,r,n,o){const a=t.raw.getPath(e,0,0,r).commands,i=t.raw.outlinesFormat,s=t.compiler.compile(a,i,n,o*r),c=([t,e])=>new BABYLON.Vector3(t,0,-e),l=[];for(const{fill:t,holes:e}of s){const r={fill:t.map(c),holes:e.map(t=>t.map(c))};l.push(r)}return l}static BuildMesh(t,e,r){const n=[];for(const{fill:o,holes:a}of t){const t=BABYLON.MeshBuilder.CreatePolygon("",{...e,shape:o,holes:a},r);n.push(t)}return n.length>0?BABYLON.Mesh.MergeMeshes(n,!0,!0):null}}class i{constructor(t,e,r){this.font=t,this.name=e,this.size=r}get ascender(){return this.font.raw.ascender/this.font.raw.unitsPerEm*this.size}get descender(){return this.font.raw.descender/this.font.raw.unitsPerEm*this.size}get advanceWidth(){return this.font.raw.getAdvanceWidth(this.name,this.size)}}r.d(e,"Compiler",(function(){return o})),r.d(e,"Font",(function(){return a}))}]);
//# sourceMappingURL=babylon.font.js.map