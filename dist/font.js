var Font=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3)}([function(t,n){t.exports=BABYLON},function(t,n,e){"use strict";const r=-8,o=-4,i=0,a=1,s=1,c=2,u=5,l=1024,f=2048,y=8192,h=0,d=4,p=8,g=12,b=12,m=16,A="undefined"!=typeof BigUint64Array,w=Symbol(),_=1024;function F(t,n){const e=new Uint32Array(t),r=new Uint16Array(t);var i=e[n+o>>>2]>>>1,a=n>>>1;if(i<=_)return String.fromCharCode.apply(String,r.subarray(a,a+i));const s=[];do{const t=r[a+_-1],n=t>=55296&&t<56320?_-1:_;s.push(String.fromCharCode.apply(String,r.subarray(a,a+=n))),i-=n}while(i>_);return s.join("")+String.fromCharCode.apply(String,r.subarray(a,a+i))}function v(t){const n={};function e(t,n){return t?F(t.buffer,n):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,o,i,a){const s=n.memory||r.memory;throw Error("abort: "+e(s,t)+" at "+e(s,o)+":"+i+":"+a)},r.trace=r.trace||function(t,o){const i=n.memory||r.memory;console.log("trace: "+e(i,t)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,n}function U(t,n){const e=n.exports,w=e.memory,_=e.table,v=e.__alloc,U=e.__retain,P=e.__rtti_base||-1;function x(t){const n=new Uint32Array(w.buffer);if((t>>>=0)>=n[P>>>2])throw Error("invalid id: "+t);return n[(P+4>>>2)+2*t]}function S(t){const n=new Uint32Array(w.buffer);if((t>>>=0)>=n[P>>>2])throw Error("invalid id: "+t);return n[(P+4>>>2)+2*t+1]}function j(t){return 31-Math.clz32(t>>>u&31)}function M(t,n,e){const r=w.buffer;if(e)switch(t){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(t){case 0:return new(n?Int8Array:Uint8Array)(r);case 1:return new(n?Int16Array:Uint16Array)(r);case 2:return new(n?Int32Array:Uint32Array)(r);case 3:return new(n?BigInt64Array:BigUint64Array)(r)}throw Error("unsupported align: "+t)}function I(t){const n=new Uint32Array(w.buffer),e=n[t+r>>>2],i=x(e);if(!(i&s))throw Error("not an array: "+e);const a=j(i);var u=n[t+d>>>2];const y=i&c?n[t+b>>>2]:n[u+o>>>2]>>>a;return M(a,i&l,i&f).subarray(u>>>=a,u+y)}function B(t,n,e){const r=w.buffer,i=new Uint32Array(r),a=i[e+d>>>2];return new t(r,a,i[a+o>>>2]>>>n)}return t.__allocString=function(t){const n=t.length,e=v(n<<1,a),r=new Uint16Array(w.buffer);for(var o=0,i=e>>>1;o<n;++o)r[i+o]=t.charCodeAt(o);return e},t.__getString=function(t){const n=w.buffer;if(new Uint32Array(n)[t+r>>>2]!==a)throw Error("not a string: "+t);return F(n,t)},t.__allocArray=function(t,n){const e=x(t);if(!(e&(s|c)))throw Error("not an array: "+t+" @ "+e);const r=j(e),o=n.length,a=v(o<<r,i),u=v(e&c?m:g,t),A=new Uint32Array(w.buffer);A[u+h>>>2]=U(a),A[u+d>>>2]=a,A[u+p>>>2]=o<<r,e&c&&(A[u+b>>>2]=o);const _=M(r,e&l,e&f);if(e&y)for(let t=0;t<o;++t)_[(a>>>r)+t]=U(n[t]);else _.set(n,a>>>r);return u},t.__getArrayView=I,t.__getArray=function(t){const n=I(t),e=n.length,r=new Array(e);for(let t=0;t<e;t++)r[t]=n[t];return r},t.__getArrayBuffer=function(t){const n=w.buffer,e=new Uint32Array(n)[t+o>>>2];return n.slice(t,t+e)},t.__getInt8Array=B.bind(null,Int8Array,0),t.__getUint8Array=B.bind(null,Uint8Array,0),t.__getUint8ClampedArray=B.bind(null,Uint8ClampedArray,0),t.__getInt16Array=B.bind(null,Int16Array,1),t.__getUint16Array=B.bind(null,Uint16Array,1),t.__getInt32Array=B.bind(null,Int32Array,2),t.__getUint32Array=B.bind(null,Uint32Array,2),A&&(t.__getInt64Array=B.bind(null,BigInt64Array,3),t.__getUint64Array=B.bind(null,BigUint64Array,3)),t.__getFloat32Array=B.bind(null,Float32Array,2),t.__getFloat64Array=B.bind(null,Float64Array,3),t.__instanceof=function(t,n){const e=new Uint32Array(w.buffer);var o=e[t+r>>>2];if(o<=e[P>>>2])do{if(o==n)return!0}while(o=S(o));return!1},t.memory=t.memory||w,t.table=t.table||_,O(e,t)}function P(t,n){var e=(...e)=>(n(e.length),t(...e));return e.original=t,e}function x(t,n){return U(v(n||(n={})),new WebAssembly.Instance(t,n))}function O(t,n){var e=n?Object.create(n):{},r=t.__setargc||function(){};function o(t,n){return Object.prototype.hasOwnProperty.call(t,n)}for(let n in t){if(!o(t,n))continue;let i=t[n],a=n.split("."),s=e;for(;a.length>1;){let t=a.shift();o(s,t)||(s[t]={}),s=s[t]}let c=a[0],u=c.indexOf("#");if(u>=0){let e=c.substring(0,u),a=s[e];if(void 0===a||!a.prototype){let t=function(...n){return t.wrap(t.prototype.constructor(0,...n))};t.prototype={valueOf:function(){return this[w]}},t.wrap=function(n){return Object.create(t.prototype,{[w]:{value:n,writable:!1}})},a&&Object.getOwnPropertyNames(a).forEach(n=>Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))),s[e]=t}if(c=c.substring(u+1),s=s[e].prototype,/^(get|set):/.test(c)){if(!o(s,c=c.substring(4))){let e=t[n.replace("set:","get:")],r=t[n.replace("get:","set:")];Object.defineProperty(s,c,{get:function(){return e(this[w])},set:function(t){r(this[w],t)},enumerable:!0})}}else"constructor"===c?s[c]=P(i,r):Object.defineProperty(s,c,{value:function(...t){return r(t.length),i(this[w],...t)}})}else/^(get|set):/.test(c)?o(s,c=c.substring(4))||Object.defineProperty(s,c,{get:t[n.replace("set:","get:")],set:t[n.replace("get:","set:")],enumerable:!0}):s[c]="function"==typeof i?P(i,r):i}return e}n.instantiate=x,n.instantiateBuffer=function(t,n){return x(new WebAssembly.Module(t),n)},n.instantiateStreaming=async function(t,n){return U(v(n||(n={})),(await WebAssembly.instantiateStreaming(t,n)).instance)},n.demangle=O},function(t,n){t.exports=opentype},function(t,n,e){"use strict";e.r(n);var r=e(2),o=e(0),i=e(1),a=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}))};function s(t){return a(this,void 0,void 0,(function*(){const n={env:{abort(t,n,e,r){console.error("abort called at assembly/index.ts:"+e+":"+r)}}};let e;if(void 0!==WebAssembly.instantiateStreaming)e=yield i.instantiateStreaming(fetch(t),n);else{const r=yield fetch(t),o=yield r.arrayBuffer();e=yield i.instantiateBuffer(o,n)}return function(t,n,r=0,o=0){r=Math.max(0,Math.min(255,Math.round(r))),o=Math.abs(o);const i=function(t,n){const e=t.memory.buffer,r=new DataView(e);let o=0,i=0,a=0;const s="M".codePointAt(0),c="L".codePointAt(0),u="Q".codePointAt(0),l="C".codePointAt(0);for(const t of n){let n=t.type.codePointAt(0);switch(r.setUint8(o,n),o++,n){case s:case c:r.setFloat64(o,t.x,!0),o+=8,r.setFloat64(o,t.y,!0),o+=8,i=t.x,a=t.y;break;case u:r.setFloat64(o,i,!0),o+=8,r.setFloat64(o,a,!0),o+=8,r.setFloat64(o,t.x1,!0),o+=8,r.setFloat64(o,t.y1,!0),o+=8,r.setFloat64(o,t.x,!0),o+=8,r.setFloat64(o,t.y,!0),o+=8,i=t.x,a=t.y;break;case l:r.setFloat64(o,i,!0),o+=8,r.setFloat64(o,a,!0),o+=8,r.setFloat64(o,t.x1,!0),o+=8,r.setFloat64(o,t.y1,!0),o+=8,r.setFloat64(o,t.x2,!0),o+=8,r.setFloat64(o,t.y2,!0),o+=8,r.setFloat64(o,t.x,!0),o+=8,r.setFloat64(o,t.y,!0),o+=8,i=t.x,a=t.y}}return o}(e,t),a=e.compile(i,n,r,o);return function(t,n){const e=new Float64Array(t.memory.buffer),r=t.__getUint32Array(n),o=new Array(r.length);for(let n=0;n<r.length;n++){const i={fill:[],holes:[]},a=t.__getUint32Array(r[n]);for(const n of a){const r=t.__getUint32Array(n);let o;0===i.fill.length?o=i.fill:i.holes.push(o=[]);for(const t of r)o.push([e[0+(t>>>3)],e[1+(t>>>3)]])}o[n]=i}return o}(e,a)}}))}e.d(n,"InstallCompiler",(function(){return u})),e.d(n,"InstallFont",(function(){return l}));var c=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,s)}c((r=r.apply(t,n||[])).next())}))};function u(t){return c(this,void 0,void 0,(function*(){const n=yield s(t);return new y(n)}))}function l(t,n){return c(this,void 0,void 0,(function*(){const e=yield function(t){return new Promise((n,e)=>{r.load(t,(t,r)=>{t?e(t):n(r)})})}(t);return new f(e,n)}))}class f{constructor(t,n){this.otFont=t,this.compiler=n}compile(t,n,e,r){const i=this.otFont.getPath(t,0,0,n),a=this.compiler.compile(i.commands,this.otFont.outlinesFormat,e,r*n),s=([t,n])=>new o.Vector3(t,0,-n),c=[];for(const{fill:t,holes:n}of a){const e={fill:t.map(s),holes:n.map(t=>t.map(s))};c.push(e)}return c}char(t,n,e,r){const o=this.compile(t,n,e,r);return new h(t,n,o,this.otFont)}}class y{constructor(t){this.compileFn=t}compile(t,n,e,r){return this.compileFn(t,n,e,r)}}class h{constructor(t,n,e,r){this.name=t,this.fontSize=n,this.shapes=e,this.otFont=r}get advanceWidth(){return this.otFont.getAdvanceWidth(this.name,this.fontSize)}get ascender(){return this.otFont.ascender/this.otFont.unitsPerEm*this.fontSize}get descender(){return this.otFont.descender/this.otFont.unitsPerEm*this.fontSize}get sTypoAscender(){return this.otFont.tables.os2.oTypoAscender/this.otFont.unitsPerEm*this.fontSize}get sTypoDescender(){return this.otFont.tables.os2.oTypoDescender/this.otFont.unitsPerEm*this.fontSize}node(t,n,e=!1){const r=new o.TransformNode("",n),i=[];let a;for(const{fill:e,holes:r}of this.shapes){const a=o.MeshBuilder.CreatePolygon("",Object.assign(Object.assign({},t),{shape:e,holes:r}),n);i.push(a)}if(i.length&&((a=o.Mesh.MergeMeshes(i,!0,!0)).parent=r,e)){const t=a.getBoundingInfo().boundingBox;r.position.copyFrom(t.center.scale(-1));const e=new o.TransformNode("",n);return r.parent=e,e}return r}}}]);
//# sourceMappingURL=font.js.map